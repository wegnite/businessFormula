{"version":3,"file":"index.js","sources":["../../src/package/index.ts"],"sourcesContent":["import type { PackageManager, PackageManagerMetadata } from '../packageManager';\n\nimport { getBunGetPackageInfoFunction } from './bun';\nimport { getNpmGetPackageInfoFunction } from './npm';\nimport { getPnpmGetPackageInfoFunction } from './pnpm';\nimport { getYarnGetPackageInfoFunction } from './yarn';\n\n/**\n * The subset of properties of PackageManager that are relevant when dealing with packages\n */\ntype PackageManagerForPackages = Pick<PackageManager, 'name' | 'version'> & {\n\tmetadata: Pick<PackageManagerMetadata, 'isYarnClassic'>;\n};\n\nexport type PackageInfo = {\n\t/** The name of the package */\n\tname: string;\n\t/** The version of the package */\n\tversion: string;\n};\n\nexport type GetPackageInfo = (packageName: string) => Promise<PackageInfo | null>;\n\n/**\n * Given a package manager, returns the getPackageInfo function for it\n *\n * @param packageManager the name and version of the package manager\n * @returns the getPackageInfo function for the package manager\n */\nexport function getPackageInfoFunction(packageManager: PackageManagerForPackages): GetPackageInfo {\n\tswitch (packageManager.name) {\n\t\tcase 'npm':\n\t\t\treturn getNpmGetPackageInfoFunction();\n\t\tcase 'pnpm':\n\t\t\treturn getPnpmGetPackageInfoFunction();\n\t\tcase 'yarn':\n\t\t\treturn getYarnGetPackageInfoFunction(packageManager);\n\t\tcase 'bun':\n\t\t\treturn getBunGetPackageInfoFunction();\n\t\tdefault:\n\t\t\tthrow new Error(`Unexpected package manager: ${packageManager.name}`);\n\t}\n}\n"],"names":["getPackageInfoFunction","packageManager","getNpmGetPackageInfoFunction","getPnpmGetPackageInfoFunction","getYarnGetPackageInfoFunction","getBunGetPackageInfoFunction"],"mappings":";;;;;;;;;;AA6BO,SAASA,EAAuBC,GAA2D;AACjG,UAAQA,EAAe,MAAM;AAAA,IAC5B,KAAK;AACJ,aAAOC,EAA6B;AAAA,IACrC,KAAK;AACJ,aAAOC,EAA8B;AAAA,IACtC,KAAK;AACJ,aAAOC,EAA8BH,CAAc;AAAA,IACpD,KAAK;AACJ,aAAOI,EAA6B;AAAA,IACrC;AACC,YAAM,IAAI,MAAM,+BAA+BJ,EAAe,MAAM;AAAA,EACtE;AACD;"}