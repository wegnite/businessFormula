import { lockFiles as r } from "./locks.js";
import { getProjectRootDir as c } from "./workspace.js";
import "node:fs/promises";
import "node:path";
import "node:process";
function o() {
  var a;
  const e = process.env.npm_config_user_agent;
  if (!e)
    return null;
  const n = e.split(" ")[0];
  return ((a = n == null ? void 0 : n.match(/^(npm|yarn|pnpm|bun)\//)) == null ? void 0 : a[1]) ?? null;
}
async function s() {
  const e = await c();
  if (!e)
    return null;
  const n = e.files;
  for (const t of Object.keys(r)) {
    const a = t;
    if (n.includes(r[a]))
      return a;
  }
  return null;
}
async function l() {
  const e = o(), n = await s();
  return {
    packageManagerName: e ?? n,
    userAgentPackageManager: e,
    filesBasedPackageManager: n
  };
}
export {
  s as detectPackageManagerBasedOnFiles,
  o as detectPackageManagerBasedOnUserAgent,
  l as detectPackageManagerName
};
//# sourceMappingURL=pmDetection.js.map
